<!doctype html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Charles Troupin</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Tryin' to turn ocean data into stories">
    <meta name="keywords" content="data analyst, engineering, oceanography, ocean science, numerical modelling" />
    <meta name="author" content="Troupin Charles">
    <link rel="canonical" href="https://ctroupin.github.io/posts/2019-09-26-wind-plot/">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

    <!-- Custom CSS & Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
    <link rel="stylesheet" href="/style.css">

    <!-- Google verification -->
    

    <!-- Bing Verification -->
    

    <!-- Custom Fonts -->
    <link rel="stylesheet" href="/assets/css/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" href="/assets/css/font-awesome/css/fontawesome-all.css">
    <link rel="stylesheet" href="/assets/css/font-awesome/css/fa-brands.css">
    <link rel="stylesheet" href="/assets/css/font-awesome/css/fa-regular.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/css/academicons.css">
    <link href="//fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>


<html lang="en-US">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<title>Charles Troupin by </title>

	<link rel="stylesheet" href="/assets/css/style.css?v=">

	<meta name="viewport" content="width=device-width">
	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

</head>

<body>

	<div class="container">
		<div class="col-lg-6 col-lg-offset-3">
			<center>
				<h2> Adding satellite wind on a visible image </h2>
			</center>
			<blogsection>
				 <div style="text-align:left; vertical-align: middle; ">
					
						<h4><i class="far fa-calendar-alt"></i></h4> 26 September 2019 &nbsp;
					
					
						<h4><i class="fas fa-wrench"></i></h4> Python, Basemap, Cartopy &nbsp;
					
					
						<h4><i class="fas fa-tags"></i></h4> Oceanography, Maps, Wind, Satellite &nbsp;
					
					
				</div>
				<p>How to create display wind vectors, measured by satellite, on top of true color image?</p>

<h2 id="data">Data</h2>

<p>We will play with:</p>
<ol>
  <li>Visible images (geoTIFF) download from <a href="https://apps.sentinel-hub.com/eo-browser">Sentinel-Hub</a> or from <a href="https://worldview.earthdata.nasa.gov/">WorldView</a>.</li>
  <li>Level-2 (swath) wind data from MetOp-A and Metop-b, distributed by <a href="">POODAC</a> (among others).</li>
</ol>

<h2 id="data-reading">Data reading</h2>

<h3 id="geotiff">geoTIFF</h3>

<p>We already showed how to get the coordinates from a geoTIFF, see for example <a href="2019-08-30-basemap_geotiff">this post</a>.    <br />
The only thing we need to ensure is to download the image with the good projection (<code class="highlighter-rouge">WGS 84</code>).</p>

<h3 id="scatterometer-wind">Scatterometer wind</h3>

<p>The wind fields are available as netCDF files from the JPL thredds server.   <br />
Getting the wind intensity and direction is not an hard task, and converting to zonal and meridional components requires a little bit of trigonometry.</p>

<p>Still, there is a problem to solve: the wind files are organised by day of the years and downloading all the files is not necessary since most of them have zero good measurements in the region of interest. This is easily solved using the OPEnDAP protocol. Then 2nd problem arises: the pattern of the file names does not allow us to construct it in an automatic way.</p>

<p>For instance, one file corresponding to September 29, 2018, is named:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="trac"><code><span class="n">ascat_20180929_081200_metopa_61980_eps_o_coa_3201_ovw</span><span class="o">.</span><span class="n">l2</span><span class="o">.</span><span class="n">nc</span><span class="o">.</span><span class="n">gz</span>
</code></pre></div></div>

<p>Of course there is a logic in the naming (year, month, day, hour, swath number…), but let’s say it’s not logic enough to code that in a few minutes. Other solution: reading the HTML from the thredds catalog and extract from it the different file paths for the corresponding day.</p>

<p>Luckily there is a library to do that in a few lines: <a href=""><code class="highlighter-rouge">BeautifulSoup</code></a>: it makes it possible to parse the html and then get all the links in the document.</p>

<h2 id="putting-all-the-pieces-together">Putting all the pieces together</h2>

<p>With the data at hand, the plot is done in a couple of lines using the <code class="highlighter-rouge">quiver()</code> function (plot of vectors).    <br />
A color can be added to</p>

			</blogsection>
		</div>
	</div>
</body>


</body>
</html>
